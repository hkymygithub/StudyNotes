# 任务调度

### crond任务调度

```
#crontab进行任务调度设置
crontab [选项]
```

| 命令 | 描述                          |
| ---- | ----------------------------- |
| -e   | 编辑crontab定时任务           |
| -l   | 查询crontab任务               |
| -r   | 删除当前用户所有的crontab任务 |

#### crond格式

| 项目     | 含义               | 范围                    |
| -------- | ------------------ | ----------------------- |
| 第一个 * | 一小时中的第几分钟 | 0-59                    |
| 第二个 * | 一天当中第几个小时 | 0-23                    |
| 第三个 * | 一个月当中的第几天 | 1-31                    |
| 第四个 * | 一年当中的第几月   | 1-12                    |
| 第五个 * | 一周当中的星期几   | 0-7（0和7都代表星期日） |

#### 特殊符号说明

| 特殊符号 | 含义                 |
| -------- | -------------------- |
| *        | 代表任何时间。       |
| ，       | 代表不连续的时间。   |
| -        | 代表连续的时间范围。 |
| */n      | 代表没隔多久执行一次 |

#### 重启任务调度服务

```
service crond restart
```

### at任务调度

1.at命令是一次性定时计划任务，at的守护进程atd会以后台模式运行，检查作业队列来运行。

2.默认情况下，atd守护进程每60秒检查作业队列，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业。

```
at [选项] [时间]
#ctrl + D 结束at命令的输入。
```

```
#检测atd是否启动
ps -ef | grep atd
```

#### 选项

| 选项          | 含义                                 |
| ------------- | ------------------------------------ |
| -m            | 当指定的任务被完成后，将给用户发邮件 |
| -I            | atq的别名                            |
| -d            | atrm的别名                           |
| -v            | 显示任务将被执行的时间               |
| -c            | 打印任务的内容到标准输出             |
| -V            | 显示版本信息                         |
| -q <队列>     | 使用指定队列                         |
| -f <文件>     | 从指定文件读任务而不是从标准输入读入 |
| -t <时间参数> | 以时间参数的形式提交要运行的任务     |

